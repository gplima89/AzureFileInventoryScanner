{
  "properties": {
    "dataCollectionEndpointId": "/subscriptions/dd8df97d-4198-4753-855e-40b86901b818/resourceGroups/rg-file-lifecycle/providers/Microsoft.Insights/dataCollectionEndpoints/StgFileLifeCycleDCEdp",
    "destinations": {
      "logAnalytics": [
        {
          "workspaceResourceId": "/subscriptions/dd8df97d-4198-4753-855e-40b86901b818/resourceGroups/rg-file-lifecycle/providers/Microsoft.OperationalInsights/workspaces/stgfilelifecycle",
          "name": "logAnalyticsDestination"
        }
      ]
    },
    "streamDeclarations": {
      "Custom-StorageLifeCycle01_CL": {
        "columns": [
          {
            "type": "datetime",
            "name": "TimeGenerated"
          },
          {
            "type": "string",
            "name": "StorageAccount"
          },
          {
            "type": "string",
            "name": "FileShare"
          },
          {
            "type": "string",
            "name": "FilePath"
          },
          {
            "type": "string",
            "name": "FileName"
          },
          {
            "type": "string",
            "name": "FileExtension"
          },
          {
            "type": "long",
            "name": "FileSizeBytes"
          },
          {
            "type": "real",
            "name": "FileSizeMB"
          },
          {
            "type": "real",
            "name": "FileSizeGB"
          },
          {
            "type": "datetime",
            "name": "LastModified"
          },
          {
            "type": "datetime",
            "name": "Created"
          },
          {
            "type": "int",
            "name": "AgeInDays"
          },
          {
            "type": "string",
            "name": "FileHash"
          },
          {
            "type": "string",
            "name": "IsDuplicate"
          },
          {
            "type": "int",
            "name": "DuplicateCount"
          },
          {
            "type": "string",
            "name": "DuplicateGroupId"
          },
          {
            "type": "string",
            "name": "FileCategory"
          },
          {
            "type": "string",
            "name": "AgeBucket"
          },
          {
            "type": "string",
            "name": "SizeBucket"
          },
          {
            "type": "string",
            "name": "ScanTimestamp"
          },
          {
            "type": "string",
            "name": "ExecutionId"
          }
        ]
      }
    },
    "dataFlows": [
      {
        "destinations": [
          "logAnalyticsDestination"
        ],
        "transformKql": "source | extend TimeGenerated = todatetime(TimeGenerated)",
        "streams": [
          "Custom-StorageLifeCycle01_CL"
        ],
        "outputStream": "Custom-StorageLifeCycle01_CL"
      }
    ]
  }
}
